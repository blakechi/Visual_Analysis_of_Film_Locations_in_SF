(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{289:function(t,e,n){},293:function(t,e,n){},311:function(t,e,n){},317:function(t,e,n){},318:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n(0),c=n.n(r),i=n(11),o=n.n(i),l=n(21),u=n(6),s=n(13),d=n(8),f=n(365),b=n(367),j=n(144),p=n.n(j),m=n(355),h=(n(289),n(372)),O=n(360),x=n(320),g=n(361),v=Object(m.a)({drawer:{width:"10%"}}),y=function(t){var e=t.anchor,n=t.drawerInfo,r=t.setDrawerInfo,c=t.toggleDrawer,i=v(),o=[{text:"Overview",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{page:"Overview"}))}},{text:"Focus",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{page:"Focus"}))}}];return Object(a.jsx)(h.a,{className:i.drawer,anchor:e,open:n[e],onClose:c(e,!1),children:Object(a.jsx)(O.a,{children:o.map((function(t){var e=t.text,n=t.onClick;return Object(a.jsx)(x.a,{button:!0,onClick:n,children:Object(a.jsx)(g.a,{primary:e})},e)}))})})},w=n(19),S=n.n(w),k=n(64),C=n(33),N=n(366),A=n(358),R=n(20),T=20,I=50,D=80,L=50,F=1200,M=700,z=70;function E(t){var e=t.data,n=t.xAxisName,c=t.fineSelect,i=t.topK,o=t.yearRange,l=Object(R.a)(t,["data","xAxisName","fineSelect","topK","yearRange"]),u=Object(r.useRef)(),s=Object(r.useRef)(),f=l.width||F,b=l.height||M;return Object(r.useEffect)((function(){var t=B(e,{xAxisName:n,fineSelect:c,topK:i,yearRange:o}),a=f-L-I,r=b-T-D,l=a/t.length,j=[L,t.length<=10?f:L+.3*a],p=d.r(s.current),m=d.p().domain([1,d.k(t.map((function(t){return t.count})))]).range([100,0]);if(p.selectAll("rect").data(t,(function(t){return t})).join((function(t){return t.append("rect").attr("fill","#7600C4").attr("opacity",".5").attr("x",(function(t,e){return L+e*l-1})).attr("y",(function(t){return m(t.count)})).attr("width",l).attr("height",(function(t){return m(1)-m(t.count)}))}),(function(t){return t.attr("x",(function(t,e){return L+e*l-1})).attr("width",l)}),(function(t){return t.call((function(t){return t.remove()}))})),0!==t.length){var h=d.d().extent([[L,1],[f-I,100.5]]).on("brush",(function(e){var c=e.selection;if(c){var i=Math.floor((c[0]-L)/l),o=Math.floor((c[1]-L)/l);!function(e){var c=d.r(u.current),i=c.transition().duration(1500),o=a/e.length,l=o<z?o:z,s=d.n().domain(e.map((function(t){return t[n]}))).rangeRound([L,L+l*e.length]),f=d.o().domain([0,d.k(t.map((function(t){return t.count})))]).rangeRound([T+r,T]),b=function(t){return t.attr("transform","translate(".concat(L,",0)")).call(d.c(f)).select(".domain").remove()};c.selectAll("rect").data(e,(function(t){return t})).join((function(t){return t.append("rect").style("mix-blend-mode","multiply").attr("fill","#7600C4").attr("opacity","1.0").attr("x",a+I).attr("y",(function(t){return f(t.count)})).attr("width",l-1).attr("height",(function(t){return f(0)-f(t.count)})).call((function(t){return t.transition(i).attr("x",(function(t){return s(t[n])}))}))}),(function(t){return t.attr("width",l-1).call((function(t){return t.transition(i).attr("x",(function(t){return s(t[n])})).attr("y",(function(t){return f(t.count)})).attr("height",(function(t){return f(0)-f(t.count)}))}))}),(function(t){return t.call((function(t){return t.transition(i).attr("fill","tomato").attr("width",0).attr("height",0).remove()}))})).on("mouseenter",(function(t,e){d.r(t.currentTarget).attr("opacity",".5"),c.append("text").attr("id","tooltip").attr("x",s(e[n])+l).attr("y",f(e.count)).attr("dy","-.35em").attr("font-size",20).text("".concat(n,": ")+e[n]+" / Count: "+e.count)})).on("mouseout mouseleave",(function(t){d.r(t.currentTarget).attr("opacity","1.0"),c.select("#tooltip").remove()})),c.select("#x-axis-label").remove(),c.append("text").attr("id","x-axis-label").attr("transform","translate("+(a/2+L)+" ,"+(r+T+40)+")").attr("fill","#737373").attr("font-family","sans-serif").attr("font-size",25).attr("text-anchor","middle").text(n),c.select("#y-axis").remove(),c.append("g").attr("id","y-axis").call(b).call((function(t){return t.select(".tick:last-of-type text").clone().attr("text-anchor","end").attr("font-size",25).attr("x",T).attr("y",-L-5).attr("transform","rotate(-90)").text("Row Count")}))}(t.filter((function(t,e){return i<=e&&e<=o})))}})).on("end",(function(t){t.selection||O.call(h.move,j)}));p.select("#brush-group").remove();var O=p.append("g").attr("id","brush-group").call(h).call(h.move,j);p.select(".overlay").attr("fill","rgba(0, 0, 0, 0)")}}),[f,b,e,n,c,i,o]),Object(a.jsxs)("div",{style:{zIndex:2,backgroundColor:"white"},children:[Object(a.jsx)("div",{children:"Bar Chart"}),Object(a.jsx)("svg",{viewBox:"0 0 ".concat(f," ").concat(b),preserveAspectRatio:"xMidYMid meet",children:Object(a.jsx)("g",{ref:u,transform:"translate(".concat(L,", ").concat(T,")")})}),Object(a.jsx)("svg",{viewBox:"0 0 ".concat(f," ").concat(100),preserveAspectRatio:"xMidYMid meet",children:Object(a.jsx)("g",{ref:s,transform:"translate(".concat(L,", 0)")})})]})}var B=function(t,e){var n=e.xAxisName,a=e.fineSelect,r=e.topK,c=e.yearRange;return a.options.filter((function(t){return 0===a.value.length||a.value.includes(t)})).map((function(e){var a;return a={},Object(l.a)(a,n,e),Object(l.a)(a,"count",t.filter((function(t){return c[0]<=t["Release Year"]&&t["Release Year"]<=c[1]&&t[n]===e})).length),a})).sort((function(t,e){var n=t.count,a=e.count;return n<a?1:n>a?-1:0})).slice(0,r)},_=c.a.memo(E),P=n(375),K=n(373),Y=n(364),V=n(362),U=n(369),W=function(t){var e=t.name,n=t.label,r=t.value,c=t.options,i=t.onChange,o=t.disabled,l=void 0!==o&&o,u=(Object(R.a)(t,["name","label","value","options","onChange","disabled"]),Object(m.a)((function(t){return{xAxis:{width:"90%"},formControl:{margin:t.spacing(1),width:"100%",maxWidth:"".concat(window.innerWidth/6-64,"px")},label:{fontSize:19},select:{"& .MuiSelect-select":{marginTop:t.spacing(2)},"& .MuiSelect-icon":{marginTop:t.spacing(1)}}}}))());return Object(a.jsx)("div",{className:u.xAxis,children:Object(a.jsxs)(V.a,{className:u.formControl,children:[Object(a.jsx)(K.a,{shrink:!0,className:u.label,id:"".concat(e,"-label"),children:n}),Object(a.jsxs)(U.a,{className:u.select,labelId:"".concat(e,"-label"),id:"".concat(e,"-placeholder-label"),value:r,onChange:i,disabled:l,displayEmpty:!0,autoWidth:!0,children:[Object(a.jsx)(Y.a,{value:"",children:Object(a.jsx)("em",{children:"(No Value)"})}),c.map((function(t){return Object(a.jsx)(Y.a,{value:t,children:t},t)}))]})]})})},G=n(72),q=n(374);function H(t){return""}function X(t){var e=t.name,n=t.label,r=t.value,c=t.range,i=t.marks,o=t.onChange,l=(Object(R.a)(t,["name","label","value","range","marks","onChange"]),Object(m.a)((function(t){return{yearSlider:{margin:t.spacing(1)},label:{fontSize:14}}}))());return Object(a.jsxs)("div",{className:l.yearSlider,children:[Object(a.jsx)(G.a,{className:l.label,id:"".concat(e,"-range-slider"),gutterBottom:!0,children:n}),Object(a.jsx)(q.a,{defaultValue:r,value:r,marks:i,step:null,min:c[0],max:c[1],onChange:o,valueLabelDisplay:"auto","aria-labelledby":"".concat(e,"-range-slider"),getAriaValueText:H})]},e)}var J=n(363),Z=n(371);function Q(t){var e=t.name,n=t.label,r=t.value,c=t.options,i=t.disabled,o=t.onChange,l=Object(R.a)(t,["name","label","value","options","disabled","onChange"]),u=Object(m.a)((function(t){return{fineSelect:{width:"90%"},formControl:{margin:t.spacing(1),width:"100%",maxWidth:"".concat(window.innerWidth/6-64,"px")},label:{fontSize:19},select:{"& .MuiSelect-select":{marginTop:t.spacing(2)},"& .MuiSelect-icon":{marginTop:t.spacing(1)}}}})),s={PaperProps:{style:{maxHeight:224,width:l.width}}},d=u();return Object(a.jsx)("div",{className:d.fineSelect,children:Object(a.jsxs)(V.a,{className:d.formControl,children:[Object(a.jsx)(K.a,{shrink:!0,className:d.label,id:"".concat(e,"-multiple-chip-label"),children:n}),Object(a.jsx)(U.a,{className:d.select,labelId:"".concat(e,"-multiple-chip-label"),id:"".concat(e,"-multiple-chip"),value:r,input:Object(a.jsx)(J.a,{}),disabled:i,onChange:o,displayEmpty:!0,multiple:!0,renderValue:function(t){return t.join(", ")},MenuProps:s,autoWidth:!0,children:c.map((function(t,e){return Object(a.jsxs)(Y.a,{value:t,disabled:!!l.disabledOptions&&l.disabledOptions[e],children:[Object(a.jsx)(Z.a,{checked:r.indexOf(t)>-1}),Object(a.jsx)(g.a,{primary:t})]},t)}))})]})})}function $(t){return"".concat(t)}function tt(t){var e=t.name,n=t.label,r=t.value,c=t.range,i=t.marks,o=t.disabled,l=t.onChange,u=(Object(R.a)(t,["name","label","value","range","marks","disabled","onChange"]),Object(m.a)((function(t){return{topK:{margin:t.spacing(1)},label:{fontSize:14}}}))());return Object(a.jsxs)("div",{className:u.topK,children:[Object(a.jsx)(G.a,{className:u.label,id:"".concat(e,"-discrete-slider"),gutterBottom:!0,children:n}),Object(a.jsx)(q.a,{defaultValue:r,value:r,getAriaValueText:$,"aria-labelledby":"".concat(e,"-discrete-slider"),valueLabelDisplay:"auto",marks:i,step:1,min:c[0],max:c[1],disabled:o,onChange:l})]},e)}var et=Object(P.a)()((function(t){var e=t.name,n=t.xAxis,r=t.fineSelect,c=t.topK,i=t.yearSlider;return Object(R.a)(t,["name","xAxis","fineSelect","topK","yearSlider"]),Object(a.jsxs)("div",{id:e,children:[Object(a.jsx)("div",{className:"panel-title",children:"Global Control"}),Object(a.jsx)(W,Object(u.a)({},n)),Object(a.jsx)(Q,Object(u.a)({},r)),Object(a.jsx)(tt,Object(u.a)({},c)),Object(a.jsx)(X,Object(u.a)({},i))]})})),nt=n(14),at=(n(293),function(t){var e="",n=0;for(var a in t){var r=t[a];e+=0===n?r:" "+a+": "+r,n++}return e}),rt=function(t){var e=t.id,n=t.title,i=t.category,o=t.data,l=t.margin,u=t.padAngle,s=t.cornerRadius,f=Object(R.a)(t,["id","title","category","data","margin","padAngle","cornerRadius"]),b=Object(r.useRef)();return Object(r.useEffect)((function(){var t=o.length,n=d.q().domain(o.map((function(t,e){return e}))).range(o.map((function(e,n){return d.i(n/t)}))),a=Math.min(90,90)/2,r=d.r(b.current),c=d.l().value((function(t){return t.count})).sort(null),l=d.a().outerRadius(.8*a).innerRadius(.6*a).cornerRadius(s).padAngle(u);r.select(".".concat(e,"-slice")).selectAll("path").data(c(o)).enter().append("path").attr("d",l).attr("fill",(function(t){return n(t.data[i])})).attr("opacity",".6").attr("transform","translate(".concat(a,", ").concat(a,")")).on("mouseover",(function(t,e){d.r(t.currentTarget).transition().duration(50).attr("opacity","1."),r.append("circle").attr("class","tooltip-circle").attr("r",.55*a).attr("fill",n(e.data[i])).attr("opacity",1).attr("transform","translate(".concat(a,", ").concat(a,")")),r.append("text").attr("class","tooltip-text").attr("transform","translate(".concat(a,", ").concat(a,")")).attr("dy",-10).html(at(e.data)).style("font-size","0.4em").style("text-anchor","middle")})).on("mouseout",(function(t){d.r(t.currentTarget).attr("opacity",".6"),d.s(".tooltip-circle").remove(),d.s(".tooltip-text").remove()}))}),[e,o,i,u,s,f]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("svg",{id:e,viewBox:"0 0 ".concat(90," ").concat(90),children:Object(a.jsx)("g",{ref:b,transform:"translate(".concat(l.left,", ").concat(l.top,")"),children:Object(a.jsx)("g",{className:"".concat(e,"-slice")})})}),Object(a.jsx)("div",{className:"donut-title",children:n})]})},ct={top:0,right:0,bottom:0,left:0},it=Object(P.a)()((function(t){var e=t.data,n=t.constraints,r=(Object(R.a)(t,["data","constraints"]),n.xAxisName),i=n.yearRange,o=n.target,u=n.selections,s=e.filter((function(t){return i[0]<=t["Release Year"]&&t["Release Year"]<=i[1]&&t[r]===o})),d=u.map((function(t){var e,n={},a=Object(nt.a)(s);try{for(a.s();!(e=a.n()).done;){var r=e.value;n[r[t]]=1+(n[r[t]]||0)}}catch(c){a.e(c)}finally{a.f()}return Object.keys(n).map((function(e){var a;return a={},Object(l.a)(a,t,e),Object(l.a)(a,"count",n[e]),a}))}));return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{children:"Donuts"}),Object(a.jsx)("div",{children:""===o?"":u.map((function(t,e){return Object(a.jsx)(rt,{id:"donut-".concat(e),title:t,category:t,data:d[e],margin:ct,padAngle:.015,cornerRadius:3},t)}))})]})}));var ot=Object(P.a)()((function(t){var e=t.name,n=t.donutTarget,r=t.donutTopic;return Object(a.jsxs)("div",{id:e,children:[Object(a.jsx)("div",{children:"Donut Control"}),Object(a.jsx)(W,Object(u.a)({},n)),Object(a.jsx)(Q,Object(u.a)({},r))]})})),lt=n(70),ut=n(71),st=n(146),dt=n(145),ft=n(147),bt=n(138);function jt(){var t=Object(bt.a)(["\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 18px;\n    height: 18px;\n    border: 2px solid #fff;\n    border-radius: 100%;\n    user-select: none;\n    transform: translate(-50%, -50%);\n    cursor: ",";\n    &:hover {\n        z-index: 1;\n    }\n"]);return jt=function(){return t},t}var pt=n(139).a.div(jt(),(function(t){return t.onClick?"pointer":"default"})),mt=function(t){var e=t.text,n=t.color,r=t.onClick;return Object(a.jsx)(pt,{alt:e,onClick:r,style:{backgroundColor:n}})};mt.defaultProps={onClick:null};var ht=mt,Ot=function(t){Object(st.a)(n,t);var e=Object(dt.a)(n);function n(){var t;Object(lt.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={colorScale30:d.q().domain(d.m(15)).range(d.m(15).map((function(t,e){return d.i(e/15)})))},t.getMarkerData=function(e,n){var a=t.state.colorScale30,r=n.xAxisName,c=n.fineSelectValue,i=[];if(0!==c.length){i=e.filter((function(t){return c.includes(t[r])})).map((function(t){return{target:t[r],address:t.Locations,latitude:t.Latitude,longitude:t.Longitude}}));var o=Object(C.a)(new Set(i.map((function(t){return t.target}))));i=i.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{color:a(o.indexOf(t.target))})}))}return i},t}return Object(ut.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.constraints,r=t.center,i=t.zoom,o=this.getMarkerData(e,n);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{children:"Map"}),Object(a.jsx)("div",{style:{height:"95%",width:"100%"},children:Object(a.jsx)(ft.a,{bootstrapURLKeys:{key:"AIzaSyALnnQIgYfZ4UyhBXfRUtTwmbnfoqBcTxA"},defaultCenter:r,defaultZoom:i,yesIWantToUseGoogleMapApiInternals:!0,children:o.map((function(t,e){return Object(a.jsx)(ht,{text:t.address,lat:t.latitude,lng:t.longitude,color:t.color},e)}))})})]})}}]),n}(r.Component);Ot.defaultProps={center:{lat:37.7694208,lng:-122.4262138},zoom:11};var xt=Ot,gt=n(143),vt=n.n(gt),yt=function(){var t=Object(k.a)(S.a.mark((function t(e){var n,a=arguments;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,t.next=3,new Promise((function(t){setTimeout(t,250*n)}));case 3:return t.next=5,vt.a.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,key:"put/your/key/here"}});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wt=Object(m.a)((function(t){return{root:{flexGrow:1},item:{display:"flex"},paper:{padding:t.spacing(2),marginBottom:t.spacing(2),color:t.palette.text.secondary,width:"100%",justifyContent:"space-between",flexDirection:"row"}}})),St=function(t){var e=t.data,n=t.setData,i=t.visible,o=t.overviewSelectInfo,l=t.setIsFocusUpdate,d=t.setGeoLoading,f=Object(r.useState)({name:"x-axis",label:"Columns",value:"",options:[]}),b=Object(s.a)(f,2),j=b[0],p=b[1],m=Object(r.useState)({name:"fine-select",label:"Rows",value:[],options:[],disabled:!0}),h=Object(s.a)(m,2),O=h[0],x=h[1],g=Object(r.useState)({name:"top-k",label:"Top K",value:100,range:[1,100],marks:[{value:1,label:"1"},{value:100,label:"100"}],disabled:!1}),v=Object(s.a)(g,2),y=v[0],w=v[1],R=Object(r.useState)({name:"year",label:"Year",value:[],range:[],marks:[]}),T=Object(s.a)(R,2),I=T[0],D=T[1],L=Object(r.useState)({name:"donut-target-selector",label:"Target for Donut",value:"",options:[],disabled:!0}),F=Object(s.a)(L,2),M=F[0],z=F[1],E=Object(r.useState)({name:"donut-topic",label:"Donut Topic",value:[],options:[],disabled:!0,optionsDisable:[]}),B=Object(s.a)(E,2),P=B[0],K=B[1];Object(r.useEffect)((function(){var t=Object(C.a)(new Set(e.map((function(t){return t["Release Year"]})))).sort(),n=[Math.min.apply(null,t),Math.max.apply(null,t)],a=Object.keys(e[0]).slice(0,-3);p((function(t){return Object(u.a)(Object(u.a)({},t),{},{options:a})})),K((function(t){return Object(u.a)(Object(u.a)({},t),{},{options:a,disabledOptions:a.map((function(t){return!1}))})})),D((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:n,range:n,marks:t.map((function(t){return{value:t,label:null}}))})}))}),[]),Object(r.useEffect)((function(){o.column&&(Y({target:{value:o.column}}),V({target:{value:o.rows,curXAxisValue:o.column}}),l((function(t){return!1})))}),[o]);var Y=function(t){var e=t.target.value;p((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}));var n=U(e);x((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:[],options:e?n:[],disabled:!e})})),z((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:"",options:e?n:[],disabled:!e})}));var a=P.options.map((function(t){return t===e}));a[j.options.indexOf(e)]=!0,K((function(t){return Object(u.a)(Object(u.a)({},t),{},{disabledOptions:a})}))},V=function(){var t=Object(k.a)(S.a.mark((function t(e){var a,r,c,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target,r=a.value,c=a.curXAxisValue,t.next=3,G(r,c);case 3:i=t.sent,n(i),x((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:r})})),z((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:"",options:0===r.length?O.options:r})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(t){var e=W(I.value).map((function(e){return e[t]}));return Object(C.a)(new Set(e)).sort()},W=function(t){return e.filter((function(e){return t[0]<=e["Release Year"]&&e["Release Year"]<=t[1]}))},G=function(){var t=Object(k.a)(S.a.mark((function t(n){var a,r,c,i=arguments;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:null,d(!0),a=j.value||a,r=e.filter((function(t){return n.includes(t[a])&&(null===t.Longitude||null===t.Latitude)})),c=r.map((function(t,e){return yt(t.Locations,e)})),t.abrupt("return",Promise.all(c).then((function(t){return t.map((function(t,e){var n=t.data;return 0!==n.results.length?n.results[0].geometry.location:{lat:void 0,lng:void 0}}))})).then((function(t){var n=Object(C.a)(e);return t.forEach((function(t,e){try{n[r[e].id]=Object(u.a)(Object(u.a)({},n[r[e].id]),{},{Latitude:t.lat,Longitude:t.lng})}catch(a){console.log(a)}})),d(!1),n})).catch((function(t){return console.log(t),e})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=wt();return i?Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)("div",{className:q.root,id:"details-page",children:[Object(a.jsxs)(N.a,{container:!0,spacing:2,alignItems:"stretch",children:[Object(a.jsxs)(N.a,{className:q.item,container:!0,item:!0,xs:2,direction:"row",children:[Object(a.jsx)(A.a,{className:q.paper,children:Object(a.jsx)(et,{name:"global-control-panel",xAxis:Object(u.a)(Object(u.a)({},j),{},{onChange:Y}),fineSelect:Object(u.a)(Object(u.a)({},O),{},{onChange:V}),topK:Object(u.a)(Object(u.a)({},y),{},{onChange:function(t,e){w((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}}),yearSlider:Object(u.a)(Object(u.a)({},I),{},{onChange:function(t,e){D((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}})})}),Object(a.jsx)(A.a,{className:q.paper,children:Object(a.jsx)(ot,{name:"donut-control-panel",donutTarget:Object(u.a)(Object(u.a)({},M),{},{onChange:function(t){var e=t.target.value;z((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})})),K((function(t){return Object(u.a)(Object(u.a)({},t),{},{disabled:""===e})}))}}),donutTopic:Object(u.a)(Object(u.a)({},P),{},{onChange:function(t){var e=t.target.value;K((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}})})})]}),Object(a.jsx)(N.a,{className:q.item,item:!0,xs:8,children:Object(a.jsx)(A.a,{className:q.paper,children:Object(a.jsx)(_,{data:e,xAxisName:j.value,fineSelect:O,topK:y.value,yearRange:I.value})})}),Object(a.jsx)(N.a,{className:q.item,item:!0,xs:2,children:Object(a.jsx)(A.a,{className:q.paper,children:Object(a.jsx)(it,{data:e,constraints:{xAxisName:j.value,yearRange:I.value,target:M.value,selections:P.value}})})})]}),Object(a.jsx)(N.a,{container:!0,children:Object(a.jsx)(N.a,{className:q.item,item:!0,xs:12,children:Object(a.jsx)(A.a,{className:q.paper,style:{height:"550px"},children:Object(a.jsx)(xt,{data:e,constraints:{xAxisName:j.value,fineSelectValue:O.value}})})})})]})}):null},kt=(n(311),function t(e){return"".concat(e.parent?t(e.parent)+".":"").concat(e.data.name)}),Ct=function(t,e,n,a){return e.map((function(e){if("Others"===e.name)return{name:e.name,size:e.count,imports:[]};var r=t.filter((function(t){return t[n.name]===e.name})).map((function(t){var e=[];return a.forEach((function(n){n.list.includes(t[n.name])?e.push(n.prefix.concat(t[n.name])):e.push(n.prefix.concat("Others"))})),e}));return r=r.reduce((function(t,e){return t.concat(e)}),[]),r=Object(C.a)(new Set(r)),{name:e.name,size:e.count,imports:r}}))},Nt=function(t,e){for(var n=t.map((function(t){return t[e]})),a={},r=0;r<n.length;r++)a[n[r]]=1+(a[n[r]]||0);var c=Object.entries(a).map((function(t){return{name:t[0],count:t[1]}})),i={name:"Others",count:(c=c.sort((function(t,e){var n=t.count,a=e.count;return n<a?1:n>a?-1:0}))).slice(59).reduce((function(t,e){return t+e.count}),0)};return(c=c.slice(0,59)).push(i),c},At=function(t){var e=t.data,n=t.returnClickedItems,c=(t.toCleanClickedItems,window.innerHeight),i=window.innerHeight,o=i/2.5,l=1.5*o,f=6*c/12,b=Object(r.useRef)(),j=Object(r.useState)({parent:"",children:[]}),p=Object(s.a)(j,2),m=p[0],h=p[1],O=Object(r.useState)((function(){var t=d.e().size([2*Math.PI,o-100]),n=Nt(e,"Title"),a=Nt(e,"Locations"),r=Nt(e,"Director"),c=function(t,e,n,a){var r={name:"Title",prefix:"SF_Films.Title.",list:e.map((function(t){return t.name}))},c={name:"Locations",prefix:"SF_Films.Locations.",list:n.map((function(t){return t.name}))},i={name:"Director",prefix:"SF_Films.Director.",list:a.map((function(t){return t.name}))};return{name:"SF_Films",children:[{name:"Title",children:Ct(t,e,r,[c,i])},{name:"Locations",children:Ct(t,n,c,[r,i])},{name:"Director",children:Ct(t,a,i,[c,r])}]}}(e,n,a,r);return t(function(t){var e,n=new Map(t.leaves().map((function(t){return[kt(t),t]}))),a=Object(nt.a)(t.leaves());try{var r=function(){var t=e.value;t.incoming=[],t.outgoing=t.data.imports.map((function(e){return[t,n.get(e)]}))};for(a.s();!(e=a.n()).done;)r()}catch(d){a.e(d)}finally{a.f()}var c,i=Object(nt.a)(t.leaves());try{for(i.s();!(c=i.n()).done;){var o,l=c.value,u=Object(nt.a)(l.outgoing);try{for(u.s();!(o=u.n()).done;){var s=o.value;s[1].incoming.push(s)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){i.e(d)}finally{i.f()}return t}(d.h(c).sort((function(t,e){return d.b(t.height,e.height)||d.b(t.data.name,e.data.name)}))))})),x=Object(s.a)(O,2),g=x[0];x[1];return Object(r.useEffect)((function(){var t=Object(u.a)({},m),e={Title:"#5DE645",Locations:"#E6A42E",Director:"#1777E6"},a=d.j().curve(d.g.beta(.85)).radius((function(t){return t.y})).angle((function(t){return t.x})),r=d.r(b.current);r.select("#title").remove(),r.select("#nodes").remove(),r.select("#links").remove(),r.append("text").attr("id","title").attr("transform","translate("+.3*-c+" ,"+.4*-i+")").attr("fill","#737373").attr("font-family","sans-serif").attr("font-size",20).attr("text-anchor","middle").text("Overview"),r.selectAll("legendDot").data(Object.keys(e)).enter().append("circle").attr("cx",.25*c).attr("cy",(function(t,e){return.4*-i+15*e})).attr("r",3).attr("fill",(function(t){return e[t]})),r.selectAll("legendText").data(Object.keys(e)).enter().append("text").attr("x",.25*c+10).attr("y",(function(t,e){return.4*-i+15*e})).attr("font-size",10).attr("fill",(function(t){return e[t]})).text((function(t){return t})).attr("text-anchor","left").attr("alignment-baseline","middle"),r.append("g").attr("id","nodes").attr("font-family","sans-serif").attr("font-size",8).selectAll("g").data(g.leaves()).join("g").attr("transform",(function(t){return"rotate(".concat(180*t.x/Math.PI-90,") translate(").concat(t.y,",0)")})).append("text").attr("dy","0.31em").attr("x",(function(t){return t.x<Math.PI?6:-6})).attr("fill",(function(t){return e[t.parent.data.name]})).attr("font-weight",(function(t){return m.children.includes(t.data.name)?"bold":null})).attr("text-anchor",(function(t){return t.x<Math.PI?"start":"end"})).attr("transform",(function(t){return t.x>=Math.PI?"rotate(180)":null})).text((function(t){var e=t.data.name.replaceAll("_"," ");return e.length<=20?e:e.slice(0,20).concat("...")})).each((function(t){t.text=this})).on("click",(function(e,a){var r=a.parent.data.name,c=a.data.name;t=r!==m.parent?{parent:r,children:[c]}:m.children.includes(c)?Object(u.a)(Object(u.a)({},m),{},{children:m.children.filter((function(t){return t!==c}))}):Object(u.a)(Object(u.a)({},m),{},{children:[].concat(Object(C.a)(m.children),[c])});n(t),h((function(e){return Object(u.a)({},t)}))})).on("mouseover",(function(t,n){o.style("mix-blend-mode",null),d.r(this).attr("font-weight","bold"),d.s(n.incoming.map((function(t){return t.path}))).attr("stroke","#00f").raise(),d.s(n.incoming.map((function(t){return Object(s.a)(t,1)[0].text}))).attr("fill",(function(t){return e[t.parent.data.name]})).attr("font-weight","bold"),d.s(n.outgoing.map((function(t){return t.path}))).attr("stroke","#f00").raise(),d.s(n.outgoing.map((function(t){return Object(s.a)(t,2)[1].text}))).attr("fill",(function(t){return e[t.parent.data.name]})).attr("font-weight","bold")})).on("mouseout",(function(t,n){if(o.style("mix-blend-mode","multiply"),d.s(n.incoming.map((function(t){return t.path}))).attr("stroke",null),d.s(n.incoming.map((function(t){return Object(s.a)(t,1)[0].text}))).attr("fill",(function(t){return e[t.parent.data.name]})).attr("font-weight",null),d.s(n.outgoing.map((function(t){return t.path}))).attr("stroke",null),d.s(n.outgoing.map((function(t){return Object(s.a)(t,2)[1].text}))).attr("fill",(function(t){return e[t.parent.data.name]})).attr("font-weight",null),m.children.includes(n.data.name))return;d.r(this).attr("font-weight",null)})).call((function(t){return t.append("title").text((function(t){return"".concat(kt(t).replaceAll("."," / "),"\n        ").concat(t.outgoing.length," outgoing\n        ").concat(t.incoming.length," incoming")}))}));var o=r.append("g").attr("id","links").attr("stroke","#ccc").attr("stroke-width",(function(t){return"0.075%"})).attr("fill","none").selectAll("path").data(g.leaves().flatMap((function(t){return t.outgoing}))).join("path").attr("mix-blend-mode","multiply").attr("d",(function(t){var e=Object(s.a)(t,2),n=e[0],r=e[1];return a(n.path(r))})).each((function(t){t.path=this}))})),Object(a.jsx)("div",{className:"chord",children:Object(a.jsx)("svg",{className:"d3-chord",id:kt,viewBox:"0 0 ".concat(c," ").concat(i),children:Object(a.jsx)("g",{ref:b,transform:"translate(".concat(f,", ").concat(l,")")})})})},Rt=Object(m.a)((function(t){return{root:{flexGrow:1,width:"100%",marginTop:"16px",marginBottom:"16px"},item:{display:"flex"},paper:{color:t.palette.text.secondary,width:"100%",height:"100%",justifyContent:"space-between",flexDirection:"row"}}})),Tt=function(t){var e=t.data,n=t.visible,r=t.setOverviewSelectInfo,c=t.isFocusUpdate,i=Rt();return n?Object(a.jsx)("div",{id:"overview-page",children:Object(a.jsx)(N.a,{className:i.root,container:!0,alignItems:"stretch",children:Object(a.jsx)(N.a,{className:i.item,item:!0,xs:12,children:Object(a.jsx)(A.a,{className:i.paper,children:Object(a.jsx)(At,{data:e,returnClickedItems:function(t){var e=t.parent,n=t.children;r((function(t){return Object(u.a)(Object(u.a)({},t),{},{column:e,rows:n})}))},toCleanClickedItems:c})})})})}):null},It=Object(m.a)((function(t){return{titleContainer:{margin:0,padding:0,boxSizing:"border-box"},title:{position:"fixed",width:"100%",height:"50px",backgroundColor:"#5D10A8",color:"white",paddingLeft:"10px",paddingTop:"5px",fontWeight:"lighter",fontFamily:"Roboto",zIndex:10},titleDummy:{width:"100%",height:"50px",backgroundColor:"white",color:"white",paddingLeft:"10px",paddingTop:"5px",zIndex:-1},progress:{position:"fixed",top:"50px",width:"100%",zIndex:11},iconBtn:{position:"fixed",right:"10px",zIndex:11},icon:{color:"white"}}}));function Dt(t){var e=Object(r.useState)(!0),n=Object(s.a)(e,2),c=n[0],i=n[1],o=Object(r.useState)([]),j=Object(s.a)(o,2),m=j[0],h=j[1],O=Object(r.useState)({right:!1,page:"Overview"}),x=Object(s.a)(O,2),g=x[0],v=x[1],w=Object(r.useState)({column:"",rows:[]}),S=Object(s.a)(w,2),k=S[0],C=S[1],N=Object(r.useState)(!1),A=Object(s.a)(N,2),R=A[0],T=A[1],I=Object(r.useState)(!1),D=Object(s.a)(I,2),L=D[0],F=D[1];Object(r.useEffect)((function(){Object(d.f)("/Visual_Analysis_of_Film_Locations_in_SF/dataset/Film_Locations_in_San_Francisco.csv").then((function(t){return(t=t.filter((function(t){return""!==t.Locations}))).forEach((function(e,n){t[n]["Release Year"]=+e["Release Year"],t[n].Title=e.Title.replaceAll([",","."],""),t[n].Locations=e.Locations.replaceAll([",","."],""),t[n].Director=e.Director.replaceAll([",","."],""),delete e["Fun Facts"]})),t.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e,Latitude:null,Longitude:null})}))})).then((function(t){h(t)})).then((function(){i(!1)}))}),[]);var M=function(t,e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&v(Object(u.a)(Object(u.a)({},g),{},Object(l.a)({},t,e)))}},z=It();return c?Object(a.jsx)("h1",{children:"Load Data..."}):Object(a.jsxs)("div",{children:[Object(a.jsx)(f.a,{className:z.iconBtn,onClick:M("right",!0),onKeyDown:M("right",!1),children:Object(a.jsx)(p.a,{className:z.icon})}),Object(a.jsx)("h1",{className:z.title,children:"Film Locations in San Francisco"}),Object(a.jsx)("div",{className:z.titleDummy}),L?Object(a.jsx)(b.a,{className:z.progress}):Object(a.jsx)(b.a,{className:z.progress,variant:"determinate",value:0}),Object(a.jsx)(y,{anchor:"right",drawerInfo:g,setDrawerInfo:v,toggleDrawer:M}),Object(a.jsxs)("div",{className:z.root,children:[Object(a.jsx)(Tt,{data:m,setOverviewSelectInfo:C,isFocusUpdate:R,visible:!0}),Object(a.jsx)(St,{data:m,setData:h,setIsFocusUpdate:T,setGeoLoading:F,overviewSelectInfo:k,visible:!0})]})]})}var Lt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,377)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},Ft=n(368);n(316),n(317);o.a.render(Object(a.jsxs)(c.a.StrictMode,{children:[Object(a.jsx)(Ft.a,{}),Object(a.jsx)(Dt,{})]}),document.getElementById("root")),Lt()}},[[318,1,2]]]);
//# sourceMappingURL=main.1cb88d58.chunk.js.map