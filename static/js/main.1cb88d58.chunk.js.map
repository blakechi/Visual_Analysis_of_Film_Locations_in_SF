{"version":3,"sources":["components/Drawer.jsx","components/BarChart.jsx","components/Selector.jsx","components/YearSlider.jsx","components/MultiSelector.jsx","components/TopKSlider.jsx","components/GlobalControlPanel.jsx","components/Donut.jsx","components/DonutsPanel.jsx","components/DonutControlPanel.jsx","components/Marker.jsx","components/Map.jsx","uitls/getGeocodePromise.js","components/FocusPage.jsx","components/Chord.jsx","components/OverviewPage.jsx","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","drawer","width","Drawer","props","anchor","drawerInfo","setDrawerInfo","toggleDrawer","classes","itemsList","text","onClick","page","className","open","onClose","List","map","item","ListItem","button","ListItemText","primary","margin","defaults","BarChart","data","xAxisName","fineSelect","topK","yearRange","rest","ref","useRef","brushRef","height","useEffect","filteredData","getFilteredData","innerWidth","innerHeight","brushBandWidth","length","defaultSelection","brushSvg","d3","current","brushBarY","domain","d","count","range","selectAll","join","enter","append","attr","idx","update","exit","call","remove","brush","extent","focusHeight","on","selection","leftIdx","Math","floor","rightIdx","barChartData","svg","t","transition","duration","fullExpandBandWidth","bandWidth","x","rangeRound","y","yAxis","g","select","style","event","currentTarget","clone","drawBarChart","filter","ele","brushGroup","move","zIndex","backgroundColor","viewBox","preserveAspectRatio","transform","constraints","options","value","includes","sort","a","b","A","B","slice","React","memo","Selector","name","label","onChange","disabled","theme","xAxis","formControl","spacing","maxWidth","window","fontSize","marginTop","FormControl","InputLabel","shrink","id","Select","labelId","displayEmpty","autoWidth","MenuItem","valuetext","YearSlider","marks","yearSlider","Typography","gutterBottom","Slider","defaultValue","step","min","max","valueLabelDisplay","aria-labelledby","getAriaValueText","MultipleSelector","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","input","Input","multiple","renderValue","selected","disabledOptions","Checkbox","checked","indexOf","TopKSlider","withWidth","toolTipHTML","tip","i","key","Donut","title","category","padAngle","cornerRadius","dataLength","colorScale","radius","pie","arc","outerRadius","innerRadius","html","Fragment","left","top","right","bottom","target","selections","donutsData","selectedName","counts","Object","keys","donutTarget","donutTopic","Wrapper","styled","div","Marker","color","alt","defaultProps","Map","state","colorScale30","getMarkerData","fineSelectValue","markerData","address","Locations","latitude","Latitude","longitude","Longitude","uniqueTarget","Set","this","center","zoom","bootstrapURLKeys","defaultCenter","defaultZoom","yesIWantToUseGoogleMapApiInternals","lat","lng","Component","getGeocodePromise","Promise","resolve","setTimeout","axios","get","params","root","flexGrow","display","paper","padding","marginBottom","palette","secondary","justifyContent","flexDirection","FocusPage","setData","visible","overviewSelectInfo","setIsFocusUpdate","setGeoLoading","useState","setXAxis","setFineSelect","setTopK","setYearSlider","setDonutTarget","optionsDisable","setDonutTopic","years","apply","allXAxisName","column","handleXAxisChange","handleFineSelectChange","rows","curXAxisValue","isFocusUpdate","fineSelectOptions","getFineSelectOptions","updateGeocode","newData","elementName","result","getDataInYearRange","xAxisValue","promises","all","then","responses","response","results","geometry","location","undefined","locations","forEach","error","console","log","catch","Grid","container","alignItems","xs","direction","Paper","newValue","node","parent","construct_children","tgtData","tgtInfo","restsInfo","tgt","size","imports","connections","list","push","prefix","concat","reduce","acc","curr","getColumnUniCount","columnName","tgtList","tmp_counts","uniCounts","entries","others","Chord","returnClickedItems","toCleanClickedItems","verticalShift","horizontalShift","children","clickedItems","setClickedItems","tree","PI","uniTitle","uniLoc","uniDirector","data_hierachy","titleInfo","locInfo","directorInfo","hierachy_SF","leaves","incoming","outgoing","o","bilink","tmpClickedItems","nodeColor","Title","Director","line","curve","beta","angle","replaceAll","each","clickedParentName","clickedChildrenName","links","path","raise","flatMap","leaf","OverviewPage","setOverviewSelectInfo","titleContainer","boxSizing","position","paddingLeft","paddingTop","fontWeight","fontFamily","titleDummy","progress","iconBtn","icon","App","loading","setLoading","geoLoading","csv","process","type","IconButton","onKeyDown","LinearProgress","variant","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.1cb88d58.chunk.js","sourcesContent":["import React from \"react\";\nimport { Drawer as MUIDrawer, ListItem, List, ListItemText } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n    drawer: {\n        width: \"10%\",\n    },\n});\n\nconst Drawer = (props) => {\n    const { anchor, drawerInfo, setDrawerInfo, toggleDrawer } = props;\n    const classes = useStyles();\n    const itemsList = [\n        {\n            text: \"Overview\",\n            onClick: () => {\n                setDrawerInfo({ ...drawerInfo, page: \"Overview\" });\n            },\n        },\n        {\n            text: \"Focus\",\n            onClick: () => {\n                setDrawerInfo({ ...drawerInfo, page: \"Focus\" });\n            },\n        },\n    ];\n    return (\n        <MUIDrawer\n            className={classes.drawer}\n            anchor={anchor}\n            open={drawerInfo[anchor]}\n            onClose={toggleDrawer(anchor, false)}\n        >\n            <List>\n                {itemsList.map((item) => {\n                    const { text, onClick } = item;\n                    return (\n                        <ListItem button key={text} onClick={onClick}>\n                            <ListItemText primary={text} />\n                        </ListItem>\n                    );\n                })}\n            </List>\n        </MUIDrawer>\n    );\n};\n\nexport default Drawer;\n","import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nconst margin = {\n  top: 20,\n  right: 50,\n  bottom: 80,\n  left: 50,\n};\nconst defaults = {\n  width: 1200,\n  height: 700,\n  maxBandWidth: 70,\n};\n\nfunction BarChart({ data, xAxisName, fineSelect, topK, yearRange, ...rest }) {\n  const ref = useRef();\n  const brushRef = useRef();\n\n  const width = rest.width || defaults.width;\n  const height = rest.height || defaults.height;\n  const focusHeight = 100;\n\n  useEffect(() => {\n    const filteredData = getFilteredData(data, {\n      xAxisName,\n      fineSelect,\n      topK,\n      yearRange,\n    });\n\n    // D3\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    // Brush\n    {\n      const brushBandWidth = innerWidth / filteredData.length;\n      const defaultSelection = [\n        margin.left,\n        filteredData.length <= 10 ? width : margin.left + 0.3 * innerWidth, // render 10% of data\n      ];\n\n      const brushSvg = d3.select(brushRef.current);\n      const brushBarY = d3\n        .scaleLog()\n        .domain([1, d3.max(filteredData.map((d) => d.count))])\n        .range([focusHeight, 0]);\n\n      brushSvg\n        .selectAll(\"rect\")\n        .data(filteredData, (d) => d)\n        .join(\n          (enter) =>\n            enter\n              .append(\"rect\")\n              .attr(\"fill\", \"#7600C4\")\n              .attr(\"opacity\", \".5\")\n              .attr(\"x\", (d, idx) => margin.left + idx * brushBandWidth - 1)\n              .attr(\"y\", (d) => brushBarY(d.count))\n              .attr(\"width\", brushBandWidth)\n              .attr(\"height\", (d) => brushBarY(1) - brushBarY(d.count)),\n          (update) =>\n            update\n              .attr(\"x\", (d, idx) => margin.left + idx * brushBandWidth - 1)\n              .attr(\"width\", brushBandWidth),\n          (exit) => exit.call((exit) => exit.remove())\n        );\n      if (filteredData.length === 0) return;\n\n      const brush = d3\n        .brushX()\n        .extent([\n          [margin.left, 1],\n          [width - margin.right, focusHeight + 0.5],\n        ])\n        .on(\"brush\", brushed)\n        .on(\"end\", brushended);\n\n      brushSvg.select(\"#brush-group\").remove();\n      const brushGroup = brushSvg\n        .append(\"g\")\n        .attr(\"id\", \"brush-group\")\n        .call(brush)\n        .call(brush.move, defaultSelection);\n      brushSvg.select(\".overlay\").attr(\"fill\", \"rgba(0, 0, 0, 0)\");\n\n      function brushed({ selection }) {\n        if (selection) {\n          const leftIdx = Math.floor(\n            (selection[0] - margin.left) / brushBandWidth\n          );\n          const rightIdx = Math.floor(\n            (selection[1] - margin.left) / brushBandWidth\n          );\n\n          const barChartData = filteredData.filter(\n            (ele, idx) => leftIdx <= idx && idx <= rightIdx\n          );\n          drawBarChart(barChartData);\n        }\n      }\n\n      function brushended({ selection }) {\n        if (!selection) {\n          brushGroup.call(brush.move, defaultSelection);\n        }\n      }\n    }\n\n    // Bar Chart\n    function drawBarChart(barChartData) {\n      const svg = d3.select(ref.current);\n      const t = svg.transition().duration(1500);\n      const fullExpandBandWidth = innerWidth / barChartData.length;\n      const bandWidth =\n        fullExpandBandWidth < defaults.maxBandWidth\n          ? fullExpandBandWidth\n          : defaults.maxBandWidth;\n\n      const x = d3\n        .scaleBand()\n        .domain(barChartData.map((d) => d[xAxisName]))\n        .rangeRound([\n          margin.left,\n          margin.left + bandWidth * barChartData.length,\n        ]);\n\n      const y = d3\n        .scaleLinear()\n        .domain([0, d3.max(filteredData.map((d) => d.count))])\n        .rangeRound([margin.top + innerHeight, margin.top]);\n\n      // const xAxis = (g) =>\n      //   g\n      //     .attr(\"transform\", `translate(0,${margin.top + innerHeight})`)\n      //     .call(d3.axisBottom(x))\n      //     .select(\".domain\")\n      //     .remove();\n\n      const yAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${margin.left},0)`)\n          .call(d3.axisLeft(y))\n          .select(\".domain\")\n          .remove();\n\n      const bars = svg\n        .selectAll(\"rect\")\n        .data(barChartData, (d) => d)\n        .join(\n          (enter) =>\n            enter\n              .append(\"rect\")\n              .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", \"#7600C4\")\n              .attr(\"opacity\", \"1.0\")\n              .attr(\"x\", innerWidth + margin.right)\n              .attr(\"y\", (d) => y(d.count))\n              .attr(\"width\", bandWidth - 1)\n              .attr(\"height\", (d) => y(0) - y(d.count))\n              .call((enter) =>\n                enter.transition(t).attr(\"x\", (d) => x(d[xAxisName]))\n              ),\n          (update) =>\n            update.attr(\"width\", bandWidth - 1).call((update) =>\n              update\n                .transition(t)\n                .attr(\"x\", (d) => x(d[xAxisName]))\n                .attr(\"y\", (d) => y(d.count))\n                .attr(\"height\", (d) => y(0) - y(d.count))\n            ),\n          (exit) =>\n            exit.call((exit) =>\n              exit\n                .transition(t)\n                .attr(\"fill\", \"tomato\")\n                .attr(\"width\", 0)\n                .attr(\"height\", 0)\n                .remove()\n            )\n        );\n\n      bars\n        .on(\"mouseenter\", (event, d) => {\n          d3.select(event.currentTarget).attr(\"opacity\", \".5\");\n          svg\n            .append(\"text\")\n            .attr(\"id\", \"tooltip\")\n            .attr(\"x\", x(d[xAxisName]) + bandWidth)\n            .attr(\"y\", y(d.count))\n            .attr(\"dy\", \"-.35em\")\n            .attr(\"font-size\", 20)\n            .text(`${xAxisName}: ` + d[xAxisName] + \" / Count: \" + d.count);\n        })\n        .on(\"mouseout mouseleave\", (event) => {\n          d3.select(event.currentTarget).attr(\"opacity\", \"1.0\");\n          svg.select(\"#tooltip\").remove();\n        });\n\n      svg.select(\"#x-axis-label\").remove();\n      svg\n        .append(\"text\")\n        .attr(\"id\", \"x-axis-label\")\n        .attr(\n          \"transform\",\n          \"translate(\" +\n            (innerWidth / 2 + margin.left) +\n            \" ,\" +\n            (innerHeight + margin.top + 40) +\n            \")\"\n        )\n        .attr(\"fill\", \"#737373\")\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"font-size\", 25)\n        .attr(\"text-anchor\", \"middle\")\n        .text(xAxisName);\n\n      svg.select(\"#y-axis\").remove();\n      svg\n        .append(\"g\")\n        .attr(\"id\", \"y-axis\")\n        .call(yAxis)\n        .call((g) =>\n          g\n            .select(\".tick:last-of-type text\")\n            .clone()\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"font-size\", 25)\n            .attr(\"x\", margin.top)\n            .attr(\"y\", -margin.left - 5)\n            .attr(\"transform\", `rotate(-90)`)\n            .text(\"Row Count\")\n        );\n    }\n  }, [width, height, data, xAxisName, fineSelect, topK, yearRange]);\n\n  return (\n    <div style={{ zIndex: 2, backgroundColor: \"white\" }}>\n      <div>Bar Chart</div>\n      <svg\n        viewBox={`0 0 ${width} ${height}`}\n        preserveAspectRatio=\"xMidYMid meet\"\n      >\n        <g ref={ref} transform={`translate(${margin.left}, ${margin.top})`}></g>\n      </svg>\n      <svg\n        viewBox={`0 0 ${width} ${focusHeight}`}\n        preserveAspectRatio=\"xMidYMid meet\"\n      >\n        <g ref={brushRef} transform={`translate(${margin.left}, 0)`}></g>\n      </svg>\n    </div>\n  );\n}\n\nconst getFilteredData = (data, constraints) => {\n  const { xAxisName, fineSelect, topK, yearRange } = constraints;\n  return (\n    fineSelect.options\n      // if no fine selections, every d passes\n      // if fine selections exist, return the relevant data\n      .filter(\n        (d) => fineSelect.value.length === 0 || fineSelect.value.includes(d)\n      )\n      .map((d) => ({\n        [xAxisName]: d,\n        count: data.filter(\n          (ele) =>\n            yearRange[0] <= ele[\"Release Year\"] &&\n            ele[\"Release Year\"] <= yearRange[1] &&\n            ele[xAxisName] === d\n        ).length,\n      }))\n      .sort((a, b) => {\n        var A = a.count;\n        var B = b.count;\n        if (A < B) {\n          return 1;\n        }\n        if (A > B) {\n          return -1;\n        }\n\n        return 0; // if equal\n      })\n      .slice(0, topK)\n  );\n};\n\nexport default React.memo(BarChart);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\n\nconst Selector = ({ name, label, value, options, onChange, disabled = false, ...rest }) => {\n    const useStyles = makeStyles((theme) => ({\n        xAxis: {\n            width: \"90%\",\n        },\n        formControl: {\n            margin: theme.spacing(1),\n            width: \"100%\",\n            maxWidth: `${window.innerWidth / 6 - 64}px`,\n        },\n        label: {\n            fontSize: 19,\n        },\n        select: {\n            \"& .MuiSelect-select\": {\n                marginTop: theme.spacing(2),\n            },\n            \"& .MuiSelect-icon\": {\n                marginTop: theme.spacing(1),\n            },\n        },\n    }));\n    const classes = useStyles();\n\n    return (\n        <div className={classes.xAxis}>\n            <FormControl className={classes.formControl}>\n                <InputLabel shrink className={classes.label} id={`${name}-label`}>\n                    {label}\n                </InputLabel>\n                <Select\n                    className={classes.select}\n                    labelId={`${name}-label`}\n                    id={`${name}-placeholder-label`}\n                    value={value}\n                    onChange={onChange}\n                    disabled={disabled}\n                    displayEmpty\n                    autoWidth\n                >\n                    <MenuItem value=\"\">\n                        <em>(No Value)</em>\n                    </MenuItem>\n                    {options.map((ele) => (\n                        <MenuItem key={ele} value={ele}>\n                            {ele}\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n        </div>\n    );\n};\n\nexport default Selector;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\n\nfunction valuetext(value) {\n    return \"\";\n}\n\nexport default function YearSlider({ name, label, value, range, marks, onChange, ...rest }) {\n    const useStyles = makeStyles((theme) => ({\n        yearSlider: {\n            margin: theme.spacing(1),\n        },\n        label: {\n            fontSize: 14,\n        },\n    }));\n    const classes = useStyles();\n\n    return (\n        <div key={name} className={classes.yearSlider}>\n            <Typography className={classes.label} id={`${name}-range-slider`} gutterBottom>\n                {label}\n            </Typography>\n            <Slider\n                defaultValue={value}\n                value={value}\n                marks={marks}\n                step={null}\n                min={range[0]}\n                max={range[1]}\n                onChange={onChange}\n                valueLabelDisplay=\"auto\"\n                aria-labelledby={`${name}-range-slider`}\n                getAriaValueText={valuetext}\n            />\n        </div>\n    );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\n\nexport default function MultipleSelector({\n    name,\n    label,\n    value,\n    options,\n    disabled,\n    onChange,\n    ...rest\n}) {\n    const useStyles = makeStyles((theme) => ({\n        fineSelect: {\n            width: \"90%\",\n        },\n        formControl: {\n            margin: theme.spacing(1),\n            width: \"100%\",\n            maxWidth: `${window.innerWidth / 6 - 64}px`,\n        },\n        label: {\n            fontSize: 19,\n        },\n        select: {\n            \"& .MuiSelect-select\": {\n                marginTop: theme.spacing(2),\n            },\n            \"& .MuiSelect-icon\": {\n                marginTop: theme.spacing(1),\n            },\n        },\n    }));\n    const MenuProps = {\n        PaperProps: {\n            style: {\n                maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n                width: rest.width,\n            },\n        },\n    };\n\n    const classes = useStyles();\n\n    return (\n        <div className={classes.fineSelect}>\n            <FormControl className={classes.formControl}>\n                <InputLabel shrink className={classes.label} id={`${name}-multiple-chip-label`}>\n                    {label}\n                </InputLabel>\n                <Select\n                    className={classes.select}\n                    labelId={`${name}-multiple-chip-label`}\n                    id={`${name}-multiple-chip`}\n                    value={value}\n                    input={<Input />}\n                    disabled={disabled}\n                    onChange={onChange}\n                    displayEmpty\n                    multiple\n                    renderValue={(selected) => selected.join(\", \")}\n                    MenuProps={MenuProps}\n                    autoWidth\n                >\n                    {options.map((ele, idx) => (\n                        <MenuItem\n                            key={ele}\n                            value={ele}\n                            disabled={rest.disabledOptions ? rest.disabledOptions[idx] : false}\n                        >\n                            <Checkbox checked={value.indexOf(ele) > -1} />\n                            <ListItemText primary={ele} />\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n        </div>\n    );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\n\nfunction valuetext(value) {\n    return `${value}`;\n}\n\nexport default function TopKSlider({\n    name,\n    label,\n    value,\n    range,\n    marks,\n    disabled,\n    onChange,\n    ...rest\n}) {\n    const useStyles = makeStyles((theme) => ({\n        topK: {\n            margin: theme.spacing(1),\n            // width: \"90%\",\n        },\n        label: {\n            fontSize: 14,\n        },\n    }));\n    const classes = useStyles();\n\n    return (\n        <div key={name} className={classes.topK}>\n            <Typography className={classes.label} id={`${name}-discrete-slider`} gutterBottom>\n                {label}\n            </Typography>\n            <Slider\n                defaultValue={value}\n                value={value}\n                getAriaValueText={valuetext}\n                aria-labelledby={`${name}-discrete-slider`}\n                valueLabelDisplay=\"auto\"\n                marks={marks}\n                step={1}\n                // step={range[1] - range[0]}\n                min={range[0]}\n                max={range[1]}\n                disabled={disabled}\n                onChange={onChange}\n            />\n        </div>\n    );\n}\n","import React from \"react\";\nimport { withWidth } from \"@material-ui/core\";\nimport Selector from \"./Selector\";\nimport YearSlider from \"./YearSlider\";\nimport MultipleSelector from \"./MultiSelector\";\nimport TopKSlider from \"./TopKSlider\";\n\nfunction GlobalControlPanel({ name, xAxis, fineSelect, topK, yearSlider, ...rest }) {\n    return (\n        <div id={name}>\n            <div className=\"panel-title\">Global Control</div>\n            <Selector {...xAxis} />\n            <MultipleSelector {...fineSelect} />\n            <TopKSlider {...topK} />\n            <YearSlider {...yearSlider} />\n        </div>\n    );\n}\n\nexport default withWidth()(GlobalControlPanel);\n","import React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../css/Donut.css\";\n\nconst Donut = ({ id, title, category, data, margin, padAngle, cornerRadius, ...rest }) => {\n    const ref = useRef();\n\n    // seems svg will be auto-resized eventually, so the how large they are doesn't matter (only effect text size)\n    const width = 90;\n    const height = 90;\n\n    useEffect(() => {\n        const dataLength = data.length;\n        const colorScale = d3\n            .scaleOrdinal()\n            .domain(data.map((d, idx) => idx))\n            .range(data.map((d, idx) => d3.interpolateSinebow(idx / dataLength)));\n        const radius = Math.min(width, height) / 2;\n\n        const svg = d3.select(ref.current);\n        const pie = d3\n            .pie()\n            .value((d) => d.count)\n            .sort(null);\n\n        // contructs and arc generator. This will be used for the donut. The difference between outer and inner\n        // radius will dictate the thickness of the donut\n        const arc = d3\n            .arc()\n            .outerRadius(radius * 0.8)\n            .innerRadius(radius * 0.6)\n            .cornerRadius(cornerRadius)\n            .padAngle(padAngle);\n\n        // this arc is used for aligning the text labels\n        // const outerArc = d3\n        //     .arc()\n        //     .outerRadius(radius * 0.9)\n        //     .innerRadius(radius * 0.9);\n\n        svg.select(`.${id}-slice`)\n            .selectAll(\"path\")\n            .data(pie(data))\n            .enter()\n            .append(\"path\")\n            .attr(\"d\", arc)\n            .attr(\"fill\", (d) => colorScale(d.data[category]))\n            .attr(\"opacity\", \".6\")\n            .attr(\"transform\", `translate(${radius}, ${radius})`)\n            .on(\"mouseover\", (event, d) => {\n                d3.select(event.currentTarget).transition().duration(50).attr(\"opacity\", \"1.\");\n                //Makes the new div appear on hover:\n\n                svg.append(\"circle\")\n                    .attr(\"class\", \"tooltip-circle\")\n                    .attr(\"r\", radius * 0.55) // radius of tooltip circle\n                    .attr(\"fill\", colorScale(d.data[category])) // colorScale based on category mouse is over\n                    .attr(\"opacity\", 1)\n                    .attr(\"transform\", `translate(${radius}, ${radius})`);\n                svg.append(\"text\")\n                    .attr(\"class\", \"tooltip-text\")\n                    .attr(\"transform\", `translate(${radius}, ${radius})`)\n                    .attr(\"dy\", -10) // hard-coded. can adjust this to adjust text vertical alignment in tooltip\n                    .html(toolTipHTML(d.data)) // add text to the circle.\n                    .style(\"font-size\", \"0.4em\")\n                    .style(\"text-anchor\", \"middle\"); // centres text in tooltip\n            })\n            .on(\"mouseout\", (event) => {\n                d3.select(event.currentTarget).attr(\"opacity\", \".6\");\n                d3.selectAll(\".tooltip-circle\").remove();\n                d3.selectAll(\".tooltip-text\").remove();\n            });\n\n        // svg.append(\"text\")\n        //     .attr(\"transform\", `translate(${radius}, ${radius})`)\n        //     .attr(\"dy\", 5)\n        //     .html(`${title}`) // add text to the circle.\n        //     .style(\"font-size\", \"0.7em\")\n        //     .style(\"text-anchor\", \"middle\"); // centres text in tooltip;\n\n        // svg.select(\".labelName\")\n        //     .datum(data)\n        //     .selectAll(\"text\")\n        //     .data(pie)\n        //     .enter()\n        //     .append(\"text\")\n        //     .attr(\"dy\", \".35em\")\n        //     .html((d) => d.data[category] + \": <tspan>\" + d.data.count + \"</tspan>\")\n        //     .attr(\"transform\", (d) => {\n        //         console.log(d);\n        //         // effectively computes the centre of the slice.\n        //         // see https://github.com/d3/d3-shape/blob/master/README.md#arc_centroid\n        //         let pos = outerArc.centroid(d);\n\n        //         // changes the point to be on left or right depending on where label is.\n        //         pos[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);\n        //         return \"translate(\" + pos + \")\";\n        //     })\n        //     .style(\"text-anchor\", (d) =>\n        //         // if slice centre is on the left, anchor text to start, otherwise anchor to end\n        //         midAngle(d) < Math.PI ? \"start\" : \"end\"\n        //     );\n\n        // svg.select(\".lines\")\n        //     .datum(data)\n        //     .selectAll(\"polyline\")\n        //     .data(pie)\n        //     .enter()\n        //     .append(\"polyline\")\n        //     .attr(\"points\", (d) => {\n        //         // see label transform function for explanations of these three lines.\n        //         let pos = outerArc.centroid(d);\n        //         pos[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);\n        //         return [arc.centroid(d), outerArc.centroid(d), pos];\n        //     });\n    }, [id, data, category, padAngle, cornerRadius, rest]);\n\n    return (\n        <React.Fragment>\n            <svg id={id} viewBox={`0 0 ${width} ${height}`}>\n                <g ref={ref} transform={`translate(${margin.left}, ${margin.top})`}>\n                    <g className={`${id}-slice`} />\n                    {/* <g className=\"labelName\" />\n                    <g className=\"lines\" /> */}\n                </g>\n            </svg>\n            <div className=\"donut-title\">{title}</div>\n        </React.Fragment>\n    );\n};\n\n// const midAngle = (d) => {\n//     return d.startAngle + (d.endAngle - d.startAngle) / 2;\n// };\nconst toolTipHTML = (d) => {\n    var tip = \"\",\n        i = 0;\n    for (const key in d) {\n        const value = d[key];\n\n        // leave off 'dy' attr for first tspan so the 'dy' attr on text element works. The 'dy' attr on\n        // tspan effectively imitates a line break.\n        if (i === 0) tip += value;\n        else tip += \" \" + key + \": \" + value;\n        // if (i === 0) tip += '<tspan x=\"0\">' + key + \": \" + value + \"</tspan>\";\n        // else tip += '<tspan x=\"0\" dy=\"1.2em\">' + key + \": \" + value + \"</tspan>\";\n        i++;\n    }\n\n    return tip;\n};\n\nexport default Donut;\n","import React from \"react\";\nimport withWidth from \"@material-ui/core/withWidth\";\nimport Donut from \"./Donut\";\n\nconst margin = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n};\nconst padAngle = 0.015;\nconst cornerRadius = 3;\n\nconst DonutsPanel = ({ data, constraints, ...rest }) => {\n    const { xAxisName, yearRange, target, selections } = constraints;\n\n    const filteredData = data.filter(\n        (ele) =>\n            yearRange[0] <= ele[\"Release Year\"] &&\n            ele[\"Release Year\"] <= yearRange[1] &&\n            ele[xAxisName] === target\n    );\n    const donutsData = selections.map((selectedName) => {\n        let counts = {};\n        for (const d of filteredData) {\n            counts[d[selectedName]] = 1 + (counts[d[selectedName]] || 0);\n        }\n\n        return Object.keys(counts).map((key) => ({\n            [selectedName]: key,\n            count: counts[key],\n        }));\n    });\n\n    return (\n        <React.Fragment>\n            <div>Donuts</div>\n            <div>\n                {target === \"\"\n                    ? \"\"\n                    : selections.map((ele, idx) => (\n                          <Donut\n                              id={`donut-${idx}`}\n                              key={ele}\n                              title={ele}\n                              category={ele}\n                              data={donutsData[idx]}\n                              margin={margin}\n                              padAngle={padAngle}\n                              cornerRadius={cornerRadius}\n                          />\n                      ))}\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default withWidth()(DonutsPanel);\n","import React from \"react\";\nimport { withWidth } from \"@material-ui/core\";\nimport Selector from \"./Selector\";\nimport MultipleSelector from \"./MultiSelector\";\n\nfunction DonutControlPanel({ name, donutTarget, donutTopic }) {\n  return (\n    <div id={name}>\n      <div>Donut Control</div>\n      <Selector {...donutTarget} />\n      <MultipleSelector {...donutTopic} />\n    </div>\n  );\n}\n\nexport default withWidth()(DonutControlPanel);\n","// from https://github.com/google-map-react/google-map-react/blob/master/example/src/components/Marker.js\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 18px;\n    height: 18px;\n    border: 2px solid #fff;\n    border-radius: 100%;\n    user-select: none;\n    transform: translate(-50%, -50%);\n    cursor: ${(props) => (props.onClick ? \"pointer\" : \"default\")};\n    &:hover {\n        z-index: 1;\n    }\n`;\n\nconst Marker = ({ text, color, onClick }) => (\n    <Wrapper alt={text} onClick={onClick} style={{ backgroundColor: color }} />\n);\n\nMarker.defaultProps = {\n    onClick: null,\n};\n\nMarker.propTypes = {\n    onClick: PropTypes.func,\n    text: PropTypes.string.isRequired,\n};\n\nexport default Marker;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport GoogleMapReact from \"google-map-react\";\n\nimport Marker from \"./Marker\";\n\nclass Map extends Component {\n  static defaultProps = {\n    center: {\n      lat: 37.7694208,\n      lng: -122.4262138,\n    },\n    zoom: 11,\n  };\n\n  state = {\n    colorScale30: d3\n      .scaleOrdinal()\n      .domain(d3.range(15))\n      .range(d3.range(15).map((d, idx) => d3.interpolateSinebow(idx / 15))),\n  };\n\n  getMarkerData = (data, constraints) => {\n    const { colorScale30 } = this.state;\n    const { xAxisName, fineSelectValue } = constraints;\n\n    var markerData = [];\n    if (fineSelectValue.length !== 0) {\n      markerData = data\n        .filter((ele) => fineSelectValue.includes(ele[xAxisName]))\n        .map((ele) => ({\n          target: ele[xAxisName],\n          address: ele.Locations,\n          latitude: ele.Latitude,\n          longitude: ele.Longitude,\n        }));\n\n      const uniqueTarget = [...new Set(markerData.map((ele) => ele.target))];\n\n      markerData = markerData.map((ele) => ({\n        ...ele,\n        color: colorScale30(uniqueTarget.indexOf(ele.target)),\n      }));\n    }\n\n    return markerData;\n  };\n\n  render() {\n    const { data, constraints, center, zoom } = this.props;\n    const markerData = this.getMarkerData(data, constraints);\n\n    return (\n      <React.Fragment>\n        <div>Map</div>\n        <div style={{ height: \"95%\", width: \"100%\" }}>\n          <GoogleMapReact\n            bootstrapURLKeys={{\n              key: \"AIzaSyALnnQIgYfZ4UyhBXfRUtTwmbnfoqBcTxA\",\n            }}\n            defaultCenter={center}\n            defaultZoom={zoom}\n            yesIWantToUseGoogleMapApiInternals\n          >\n            {markerData.map((ele, idx) => (\n              <Marker\n                key={idx}\n                text={ele.address}\n                lat={ele.latitude}\n                lng={ele.longitude}\n                color={ele.color}\n              />\n            ))}\n          </GoogleMapReact>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\nexport default Map;\n","import axios from \"axios\";\n\nconst getGeocodePromise = async (address, idx = 0) => {\n  await new Promise((resolve) => {\n    setTimeout(resolve, 250 * idx); // avoid overaccess (no more 5 requests in 1 sec)\n  });\n\n  return await axios.get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n    params: {\n      address: address,\n      key: \"put/your/key/here\",\n    },\n  });\n};\nexport default getGeocodePromise;\n","import React, { useState, useEffect } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Paper, Grid } from \"@material-ui/core\";\n\nimport BarChart from \"./BarChart\";\nimport GlobalControlPanel from \"./GlobalControlPanel\";\nimport DonutsPanel from \"./DonutsPanel\";\nimport DonutControlPanel from \"./DonutControlPanel\";\nimport Map from \"./Map\";\n\nimport getGeocodePromise from \"../uitls/getGeocodePromise\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  item: {\n    display: \"flex\",\n  },\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    color: theme.palette.text.secondary,\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n  },\n}));\n\nconst FocusPage = (props) => {\n  const {\n    data,\n    setData,\n    visible,\n    overviewSelectInfo,\n    setIsFocusUpdate,\n    setGeoLoading,\n  } = props;\n\n  const [xAxis, setXAxis] = useState({\n    name: \"x-axis\",\n    label: \"Columns\",\n    value: \"\",\n    options: [],\n  });\n  const [fineSelect, setFineSelect] = useState({\n    name: \"fine-select\",\n    label: \"Rows\",\n    value: [],\n    options: [],\n    disabled: true,\n  });\n  const [topK, setTopK] = useState({\n    name: \"top-k\",\n    label: \"Top K\",\n    value: 100,\n    range: [1, 100],\n    marks: [\n      { value: 1, label: \"1\" },\n      { value: 100, label: \"100\" },\n    ],\n    disabled: false,\n  });\n  const [yearSlider, setYearSlider] = useState({\n    name: \"year\",\n    label: \"Year\",\n    value: [],\n    range: [],\n    marks: [],\n  });\n  const [donutTarget, setDonutTarget] = useState({\n    name: \"donut-target-selector\",\n    label: \"Target for Donut\",\n    value: \"\",\n    options: [],\n    disabled: true,\n  });\n  const [donutTopic, setDonutTopic] = useState({\n    name: \"donut-topic\",\n    label: \"Donut Topic\",\n    value: [],\n    options: [],\n    disabled: true,\n    optionsDisable: [],\n  });\n\n  useEffect(() => {\n    const years = [...new Set(data.map((ele) => ele[\"Release Year\"]))].sort();\n    const yearRange = [\n      Math.min.apply(null, years),\n      Math.max.apply(null, years),\n    ];\n    const allXAxisName = Object.keys(data[0]).slice(0, -3);\n\n    setXAxis((xAxis) => ({\n      ...xAxis,\n      options: allXAxisName,\n    }));\n    setDonutTopic((donutTopic) => ({\n      ...donutTopic,\n      options: allXAxisName,\n      disabledOptions: allXAxisName.map((ele) => false),\n    }));\n    setYearSlider((yearSlider) => ({\n      ...yearSlider,\n      value: yearRange,\n      range: yearRange,\n      marks: years.map((d) => {\n        return { value: d, label: null };\n      }),\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (overviewSelectInfo.column) {\n      handleXAxisChange({ target: { value: overviewSelectInfo.column } });\n      handleFineSelectChange({\n        target: {\n          value: overviewSelectInfo.rows,\n          curXAxisValue: overviewSelectInfo.column,\n        },\n      });\n      setIsFocusUpdate((isFocusUpdate) => false);\n    }\n  }, [overviewSelectInfo]);\n\n  const handleXAxisChange = (event) => {\n    const { value } = event.target;\n    setXAxis((xAxis) => ({\n      ...xAxis,\n      value: value,\n    }));\n\n    // new X axis, new options for fine select\n    const fineSelectOptions = getFineSelectOptions(value);\n    setFineSelect((fineSelect) => ({\n      ...fineSelect,\n      value: [],\n      options: value ? fineSelectOptions : [],\n      disabled: value ? false : true,\n    }));\n    setDonutTarget((donutTarget) => ({\n      ...donutTarget,\n      value: \"\",\n      options: value ? fineSelectOptions : [],\n      disabled: value ? false : true,\n    }));\n\n    const disabledOptions = donutTopic.options.map((ele) =>\n      ele === value ? true : false\n    );\n    disabledOptions[xAxis.options.indexOf(value)] = true;\n    setDonutTopic((donutTopic) => ({\n      ...donutTopic,\n      disabledOptions: disabledOptions,\n    }));\n  };\n  const handleFineSelectChange = async (event) => {\n    const { value, curXAxisValue } = event.target;\n\n    // get Geocode if \"Latitude\" or \"Longitude\" of the selected data is null\n    const newData = await updateGeocode(value, curXAxisValue);\n    setData(newData);\n\n    setFineSelect((fineSelect) => ({\n      ...fineSelect,\n      value: value,\n    }));\n    setDonutTarget((donutTarget) => ({\n      ...donutTarget,\n      value: \"\",\n      options: value.length === 0 ? fineSelect.options : value,\n    }));\n  };\n  const handleTopKChange = (event, newValue) => {\n    setTopK((topK) => ({\n      ...topK,\n      value: newValue,\n    }));\n  };\n  const handleYearSliderChange = (event, newValue) => {\n    setYearSlider((yearSlider) => ({\n      ...yearSlider,\n      value: newValue,\n    }));\n  };\n  const handleDonutTargetChange = (event) => {\n    const { value } = event.target;\n    setDonutTarget((donutTarget) => ({\n      ...donutTarget,\n      value: value,\n    }));\n\n    setDonutTopic((donutTopic) => ({\n      ...donutTopic,\n      disabled: value === \"\",\n    }));\n  };\n  const handleDonutTopicChange = (event) => {\n    const { value } = event.target;\n    setDonutTopic((donutTopic) => ({\n      ...donutTopic,\n      value: value,\n    }));\n  };\n\n  const getFineSelectOptions = (elementName) => {\n    const selectedData = getDataInYearRange(yearSlider.value);\n    let result = selectedData.map((ele) => {\n      return ele[elementName];\n    });\n\n    // get unique options\n    return [...new Set(result)].sort();\n  };\n  const getDataInYearRange = (range) => {\n    return data.filter(\n      (ele) =>\n        range[0] <= ele[\"Release Year\"] && ele[\"Release Year\"] <= range[1]\n    );\n  };\n  const updateGeocode = async (fineSelectValue, xAxisValue = null) => {\n    setGeoLoading(true);\n\n    xAxisValue = xAxis.value || xAxisValue;\n    const filteredData = data.filter(\n      (ele) =>\n        fineSelectValue.includes(ele[xAxisValue]) &&\n        (ele.Longitude === null || ele.Latitude === null)\n    );\n    const promises = filteredData.map((ele, idx) =>\n      getGeocodePromise(ele.Locations, idx)\n    );\n\n    return Promise.all(promises)\n      .then((responses) => {\n        return responses.map((response, idx) => {\n          const data = response.data;\n\n          return data.results.length !== 0\n            ? data.results[0].geometry.location\n            : { lat: undefined, lng: undefined };\n        });\n      })\n      .then((locations) => {\n        var newData = [...data];\n        locations.forEach((location, idx) => {\n          try {\n            newData[filteredData[idx].id] = {\n              ...newData[filteredData[idx].id],\n              Latitude: location.lat,\n              Longitude: location.lng,\n            };\n          } catch (error) {\n            console.log(error);\n          }\n        });\n\n        setGeoLoading(false);\n\n        return newData;\n      })\n      .catch((error) => {\n        console.log(error);\n        // no update\n        return data;\n      });\n  };\n\n  const classes = useStyles();\n\n  return visible ? (\n    <React.Fragment>\n      <div className={classes.root} id=\"details-page\">\n        <Grid container spacing={2} alignItems=\"stretch\">\n          <Grid className={classes.item} container item xs={2} direction=\"row\">\n            <Paper className={classes.paper}>\n              <GlobalControlPanel\n                name=\"global-control-panel\"\n                xAxis={{\n                  ...xAxis,\n                  onChange: handleXAxisChange,\n                }}\n                fineSelect={{\n                  ...fineSelect,\n                  onChange: handleFineSelectChange,\n                }}\n                topK={{\n                  ...topK,\n                  onChange: handleTopKChange,\n                }}\n                yearSlider={{\n                  ...yearSlider,\n                  onChange: handleYearSliderChange,\n                }}\n              />\n            </Paper>\n            <Paper className={classes.paper}>\n              <DonutControlPanel\n                name=\"donut-control-panel\"\n                donutTarget={{\n                  ...donutTarget,\n                  onChange: handleDonutTargetChange,\n                }}\n                donutTopic={{\n                  ...donutTopic,\n                  onChange: handleDonutTopicChange,\n                }}\n              />\n            </Paper>\n          </Grid>\n          <Grid className={classes.item} item xs={8}>\n            <Paper className={classes.paper}>\n              <BarChart\n                data={data}\n                xAxisName={xAxis.value}\n                fineSelect={fineSelect}\n                topK={topK.value}\n                yearRange={yearSlider.value}\n              />\n            </Paper>\n          </Grid>\n          <Grid className={classes.item} item xs={2}>\n            <Paper className={classes.paper}>\n              <DonutsPanel\n                data={data}\n                constraints={{\n                  xAxisName: xAxis.value,\n                  yearRange: yearSlider.value,\n                  target: donutTarget.value,\n                  selections: donutTopic.value,\n                }}\n              />\n            </Paper>\n          </Grid>\n        </Grid>\n        <Grid container>\n          <Grid className={classes.item} item xs={12}>\n            <Paper className={classes.paper} style={{ height: \"550px\" }}>\n              <Map\n                data={data}\n                constraints={{\n                  xAxisName: xAxis.value,\n                  fineSelectValue: fineSelect.value,\n                }}\n              />\n            </Paper>\n          </Grid>\n        </Grid>\n      </div>\n    </React.Fragment>\n  ) : null;\n};\n\nexport default FocusPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nimport \"../css/Chord.css\";\n\nconst id = (node) => {\n  return `${node.parent ? id(node.parent) + \".\" : \"\"}${node.data.name}`;\n};\n\nconst bilink = (root) => {\n  const map = new Map(root.leaves().map((d) => [id(d), d]));\n  for (const d of root.leaves()) {\n    d.incoming = [];\n    d.outgoing = d.data.imports.map((i) => [d, map.get(i)]);\n  }\n  for (const d of root.leaves()) {\n    for (const o of d.outgoing) {\n      o[1].incoming.push(o);\n    }\n  }\n  return root;\n};\n\nconst construct_children = (data, tgtData, tgtInfo, restsInfo) => {\n  return tgtData.map((tgt) => {\n    if (tgt.name === \"Others\") {\n      return {\n        name: tgt.name,\n        size: tgt.count,\n        imports: [],\n      };\n    }\n\n    const selectedData = data.filter((ele) => ele[tgtInfo.name] === tgt.name);\n    let connections = selectedData.map((ele) => {\n      var results = [];\n      restsInfo.forEach((rest) => {\n        if (rest.list.includes(ele[rest.name])) {\n          results.push(rest.prefix.concat(ele[rest.name]));\n        } else {\n          results.push(rest.prefix.concat(\"Others\"));\n        }\n      });\n\n      return results;\n    });\n    connections = connections.reduce((acc, curr) => acc.concat(curr), []);\n    connections = [...new Set(connections)];\n\n    return {\n      name: tgt.name,\n      size: tgt.count,\n      imports: connections,\n    };\n  });\n};\n\nconst hierachy_SF = (data, uniTitle, uniLoc, uniDirector) => {\n  const titleInfo = {\n    name: \"Title\",\n    prefix: \"SF_Films.Title.\",\n    list: uniTitle.map((ele) => ele.name),\n  };\n  const locInfo = {\n    name: \"Locations\",\n    prefix: \"SF_Films.Locations.\",\n    list: uniLoc.map((ele) => ele.name),\n  };\n  const directorInfo = {\n    name: \"Director\",\n    prefix: \"SF_Films.Director.\",\n    list: uniDirector.map((ele) => ele.name),\n  };\n\n  const title = {\n    name: \"Title\",\n    children: construct_children(data, uniTitle, titleInfo, [\n      locInfo,\n      directorInfo,\n    ]),\n  };\n  const loc = {\n    name: \"Locations\",\n    children: construct_children(data, uniLoc, locInfo, [\n      titleInfo,\n      directorInfo,\n    ]),\n  };\n  const director = {\n    name: \"Director\",\n    children: construct_children(data, uniDirector, directorInfo, [\n      locInfo,\n      titleInfo,\n    ]),\n  };\n\n  return {\n    name: \"SF_Films\",\n    children: [title, loc, director],\n  };\n};\n\nconst getColumnUniCount = (data, columnName) => {\n  var tgtList = data.map((ele) => ele[columnName]);\n\n  var tmp_counts = {};\n  for (var i = 0; i < tgtList.length; i++) {\n    tmp_counts[tgtList[i]] = 1 + (tmp_counts[tgtList[i]] || 0);\n  }\n\n  const entries = Object.entries(tmp_counts);\n  var uniCounts = entries.map((ele) => ({ name: ele[0], count: ele[1] }));\n  uniCounts = uniCounts.sort((a, b) => {\n    var A = a.count;\n    var B = b.count;\n    if (A < B) {\n      return 1;\n    }\n    if (A > B) {\n      return -1;\n    }\n\n    return 0; // if equal\n  });\n\n  const others = {\n    name: \"Others\",\n    count: uniCounts.slice(59).reduce((acc, curr) => acc + curr.count, 0),\n  };\n\n  uniCounts = uniCounts.slice(0, 59);\n  uniCounts.push(others);\n\n  return uniCounts;\n};\n\nconst Chord = ({ data, returnClickedItems, toCleanClickedItems }) => {\n  const width = window.innerHeight;\n  const height = window.innerHeight;\n  const radius = height / 2.5;\n  const verticalShift = radius * 1.5; // it's a global shifting, not related to the grid in Chord.css\n  const horizontalShift = (width * 6) / 12; // it's a global shifting, not related to the grid in Chord.css\n\n  const ref = useRef();\n  const [clickedItems, setClickedItems] = useState({\n    parent: \"\",\n    children: [],\n  });\n  const [root, _] = useState(() => {\n    const tree = d3.cluster().size([2 * Math.PI, radius - 100]);\n    const uniTitle = getColumnUniCount(data, \"Title\");\n    const uniLoc = getColumnUniCount(data, \"Locations\");\n    const uniDirector = getColumnUniCount(data, \"Director\");\n    const data_hierachy = hierachy_SF(data, uniTitle, uniLoc, uniDirector);\n\n    return tree(\n      bilink(\n        d3\n          .hierarchy(data_hierachy)\n          .sort(\n            (a, b) =>\n              d3.ascending(a.height, b.height) ||\n              d3.ascending(a.data.name, b.data.name)\n          )\n      )\n    );\n  });\n\n  useEffect(() => {\n    // Data Preprocessing\n    var tmpClickedItems = { ...clickedItems };\n    const colorIn = \"#00f\";\n    const colorOut = \"#f00\";\n    const colorNone = \"#ccc\";\n    const nodeColor = {\n      Title: \"#5DE645\",\n      Locations: \"#E6A42E\",\n      Director: \"#1777E6\",\n    };\n    const line = d3\n      .lineRadial()\n      .curve(d3.curveBundle.beta(0.85))\n      .radius((d) => d.y)\n      .angle((d) => d.x);\n\n    const svg = d3.select(ref.current);\n\n    // Clean\n    svg.select(\"#title\").remove();\n    svg.select(\"#nodes\").remove();\n    svg.select(\"#links\").remove();\n\n    // Title\n    svg\n      .append(\"text\")\n      .attr(\"id\", \"title\")\n      .attr(\n        \"transform\",\n        \"translate(\" + -width * 0.3 + \" ,\" + -height * 0.4 + \")\"\n      )\n      .attr(\"fill\", \"#737373\")\n      .attr(\"font-family\", \"sans-serif\")\n      .attr(\"font-size\", 20)\n      .attr(\"text-anchor\", \"middle\")\n      .text(\"Overview\");\n\n    // Legend\n    svg\n      .selectAll(\"legendDot\")\n      .data(Object.keys(nodeColor))\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", width * 0.25)\n      .attr(\"cy\", (d, idx) => -height * 0.4 + idx * 15)\n      .attr(\"r\", 3)\n      .attr(\"fill\", (d) => nodeColor[d]);\n\n    svg\n      .selectAll(\"legendText\")\n      .data(Object.keys(nodeColor))\n      .enter()\n      .append(\"text\")\n      .attr(\"x\", width * 0.25 + 10)\n      .attr(\"y\", (d, idx) => -height * 0.4 + idx * 15)\n      .attr(\"font-size\", 10)\n      .attr(\"fill\", (d) => nodeColor[d])\n      .text((d) => d)\n      .attr(\"text-anchor\", \"left\")\n      .attr(\"alignment-baseline\", \"middle\");\n\n    // Nodes\n    svg\n      .append(\"g\")\n      .attr(\"id\", \"nodes\")\n      .attr(\"font-family\", \"sans-serif\")\n      .attr(\"font-size\", 8)\n      .selectAll(\"g\")\n      .data(root.leaves())\n      .join(\"g\")\n      .attr(\n        \"transform\",\n        (d) => `rotate(${(d.x * 180) / Math.PI - 90}) translate(${d.y},0)`\n      )\n      .append(\"text\")\n      .attr(\"dy\", \"0.31em\")\n      .attr(\"x\", (d) => (d.x < Math.PI ? 6 : -6))\n      .attr(\"fill\", (d) => nodeColor[d.parent.data.name])\n      .attr(\"font-weight\", (d) =>\n        clickedItems.children.includes(d.data.name) ? \"bold\" : null\n      )\n      .attr(\"text-anchor\", (d) => (d.x < Math.PI ? \"start\" : \"end\"))\n      .attr(\"transform\", (d) => (d.x >= Math.PI ? \"rotate(180)\" : null))\n      .text((d) => {\n        let text = d.data.name.replaceAll(\"_\", \" \");\n        return text.length <= 20 ? text : text.slice(0, 20).concat(\"...\");\n      })\n      .each(function (d) {\n        d.text = this;\n      })\n      .on(\"click\", handleClick)\n      .on(\"mouseover\", overed)\n      .on(\"mouseout\", outed)\n      .call((text) =>\n        text.append(\"title\").text(\n          (d) => `${id(d).replaceAll(\".\", \" / \")}\n        ${d.outgoing.length} outgoing\n        ${d.incoming.length} incoming`\n        )\n      );\n\n    // Links\n    const links = svg\n      .append(\"g\")\n      .attr(\"id\", \"links\")\n      .attr(\"stroke\", colorNone)\n      .attr(\"stroke-width\", (d) => \"0.075%\")\n      .attr(\"fill\", \"none\")\n      .selectAll(\"path\")\n      .data(root.leaves().flatMap((leaf) => leaf.outgoing))\n      .join(\"path\")\n      .attr(\"mix-blend-mode\", \"multiply\")\n      .attr(\"d\", ([i, o]) => line(i.path(o)))\n      .each(function (d) {\n        d.path = this;\n      });\n\n    function overed(event, d) {\n      links.style(\"mix-blend-mode\", null);\n      d3.select(this).attr(\"font-weight\", \"bold\");\n      d3.selectAll(d.incoming.map((d) => d.path))\n        .attr(\"stroke\", colorIn)\n        .raise();\n      d3.selectAll(d.incoming.map(([d]) => d.text))\n        .attr(\"fill\", (d) => nodeColor[d.parent.data.name])\n        .attr(\"font-weight\", \"bold\");\n      d3.selectAll(d.outgoing.map((d) => d.path))\n        .attr(\"stroke\", colorOut)\n        .raise();\n      d3.selectAll(d.outgoing.map(([, d]) => d.text))\n        .attr(\"fill\", (d) => nodeColor[d.parent.data.name])\n        .attr(\"font-weight\", \"bold\");\n    }\n\n    function outed(event, d) {\n      links.style(\"mix-blend-mode\", \"multiply\");\n      d3.selectAll(d.incoming.map((d) => d.path)).attr(\"stroke\", null);\n      d3.selectAll(d.incoming.map(([d]) => d.text))\n        .attr(\"fill\", (d) => nodeColor[d.parent.data.name])\n        .attr(\"font-weight\", null);\n      d3.selectAll(d.outgoing.map((d) => d.path)).attr(\"stroke\", null);\n      d3.selectAll(d.outgoing.map(([, d]) => d.text))\n        .attr(\"fill\", (d) => nodeColor[d.parent.data.name])\n        .attr(\"font-weight\", null);\n\n      if (clickedItems.children.includes(d.data.name)) return;\n      d3.select(this).attr(\"font-weight\", null);\n    }\n\n    function handleClick(event, d) {\n      const clickedParentName = d.parent.data.name;\n      const clickedChildrenName = d.data.name;\n\n      if (clickedParentName !== clickedItems.parent) {\n        tmpClickedItems = {\n          parent: clickedParentName,\n          children: [clickedChildrenName],\n        };\n      } else if (clickedItems.children.includes(clickedChildrenName)) {\n        // double click\n        tmpClickedItems = {\n          ...clickedItems,\n          children: clickedItems.children.filter(\n            (ele) => ele !== clickedChildrenName\n          ),\n        };\n      } else {\n        tmpClickedItems = {\n          ...clickedItems,\n          children: [...clickedItems.children, clickedChildrenName],\n        };\n      }\n\n      returnClickedItems(tmpClickedItems);\n      setClickedItems((clickedItems) => ({\n        ...tmpClickedItems,\n      }));\n    }\n  });\n  return (\n    <div className=\"chord\">\n      <svg className=\"d3-chord\" id={id} viewBox={`0 0 ${width} ${height}`}>\n        <g\n          ref={ref}\n          transform={`translate(${horizontalShift}, ${verticalShift})`}\n        ></g>\n      </svg>\n    </div>\n  );\n};\n\nexport default Chord;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Paper, Grid } from \"@material-ui/core\";\n\nimport Chord from \"./Chord\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    width: \"100%\",\n    marginTop: \"16px\",\n    marginBottom: \"16px\",\n  },\n  item: {\n    display: \"flex\",\n  },\n  paper: {\n    color: theme.palette.text.secondary,\n    width: \"100%\",\n    height: \"100%\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n  },\n}));\n\nconst OverviewPage = (props) => {\n  const { data, visible, setOverviewSelectInfo, isFocusUpdate } = props;\n\n  const returnClickedItems = (clickedItems) => {\n    const { parent, children } = clickedItems;\n    setOverviewSelectInfo((overviewSelectInfo) => ({\n      ...overviewSelectInfo,\n      column: parent,\n      rows: children,\n    }));\n  };\n\n  const classes = useStyles();\n\n  return visible ? (\n    <div id=\"overview-page\">\n      <Grid className={classes.root} container alignItems=\"stretch\">\n        <Grid className={classes.item} item xs={12}>\n          <Paper className={classes.paper}>\n            <Chord\n              data={data}\n              returnClickedItems={returnClickedItems}\n              toCleanClickedItems={isFocusUpdate}\n            />\n          </Paper>\n        </Grid>\n      </Grid>\n    </div>\n  ) : null;\n};\n\nexport default OverviewPage;\n","import React, { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\nimport { LinearProgress, IconButton } from \"@material-ui/core\";\nimport FormatListBulletedIcon from \"@material-ui/icons/FormatListBulleted\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport \"./css/App.css\";\n\nimport Drawer from \"./components/Drawer\";\n\nimport FocusPage from \"./components/FocusPage\";\nimport OverviewPage from \"./components/OverviewPage\";\n\nconst rawDataName = \"Film_Locations_in_San_Francisco.csv\";\n\nconst useStyles = makeStyles((theme) => ({\n  titleContainer: {\n    margin: 0,\n    padding: 0,\n    boxSizing: \"border-box\",\n  },\n  title: {\n    position: \"fixed\",\n    width: \"100%\",\n    height: \"50px\",\n    backgroundColor: \"#5D10A8\",\n    color: \"white\",\n    paddingLeft: \"10px\",\n    paddingTop: \"5px\",\n    fontWeight: \"lighter\",\n    fontFamily: \"Roboto\",\n    zIndex: 10,\n  },\n  titleDummy: {\n    width: \"100%\",\n    height: \"50px\",\n    backgroundColor: \"white\",\n    color: \"white\",\n    paddingLeft: \"10px\",\n    paddingTop: \"5px\",\n    zIndex: -1,\n  },\n  progress: {\n    position: \"fixed\",\n    top: \"50px\",\n    width: \"100%\",\n    zIndex: 11,\n  },\n  iconBtn: {\n    position: \"fixed\",\n    right: \"10px\",\n    zIndex: 11,\n  },\n  icon: {\n    color: \"white\",\n  },\n}));\n\nexport default function App(props) {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n  const [drawerInfo, setDrawerInfo] = useState({\n    right: false,\n    page: \"Overview\",\n  });\n  const [overviewSelectInfo, setOverviewSelectInfo] = useState({\n    column: \"\",\n    rows: [],\n  });\n  const [isFocusUpdate, setIsFocusUpdate] = useState(false);\n  const [geoLoading, setGeoLoading] = useState(false);\n\n  useEffect(() => {\n    csv(process.env.PUBLIC_URL + \"/dataset/\" + rawDataName)\n      .then((csv) => {\n        // Data Preprocessing\n        csv = csv.filter((ele) => ele.Locations !== \"\");\n        csv.forEach((ele, idx) => {\n          csv[idx][\"Release Year\"] = +ele[\"Release Year\"];\n          csv[idx][\"Title\"] = ele[\"Title\"].replaceAll([\",\", \".\"], \"\");\n          csv[idx][\"Locations\"] = ele[\"Locations\"].replaceAll([\",\", \".\"], \"\");\n          csv[idx][\"Director\"] = ele[\"Director\"].replaceAll([\",\", \".\"], \"\");\n          delete ele[\"Fun Facts\"];\n        });\n\n        return csv.map((ele, idx) => ({\n          ...ele,\n          id: idx,\n          Latitude: null,\n          Longitude: null,\n        }));\n      })\n      .then((csv) => {\n        // set \"data\"\n        setData(csv);\n      })\n      .then(() => {\n        // Set \"loading\"\n        setLoading(false);\n      });\n  }, []);\n\n  const toggleDrawer = (anchor, open) => (event) => {\n    if (\n      event &&\n      event.type === \"keydown\" &&\n      (event.key === \"Tab\" || event.key === \"Shift\")\n    ) {\n      return;\n    }\n\n    setDrawerInfo({ ...drawerInfo, [anchor]: open });\n  };\n\n  // const isVisible = (pageName) => {\n  //   return drawerInfo.page === pageName ? true : false;\n  // };\n\n  const classes = useStyles();\n\n  return loading ? (\n    <h1>Load Data...</h1>\n  ) : (\n    <div>\n      <IconButton\n        className={classes.iconBtn}\n        onClick={toggleDrawer(\"right\", true)}\n        onKeyDown={toggleDrawer(\"right\", false)}\n      >\n        <FormatListBulletedIcon className={classes.icon} />\n      </IconButton>\n      <h1 className={classes.title}>Film Locations in San Francisco</h1>\n      <div className={classes.titleDummy} />\n      {geoLoading ? (\n        <LinearProgress className={classes.progress} />\n      ) : (\n        <LinearProgress\n          className={classes.progress}\n          variant=\"determinate\"\n          value={0}\n        />\n      )}\n      <Drawer\n        anchor={\"right\"}\n        drawerInfo={drawerInfo}\n        setDrawerInfo={setDrawerInfo}\n        toggleDrawer={toggleDrawer}\n      />\n      <div className={classes.root}>\n        <OverviewPage\n          data={data}\n          setOverviewSelectInfo={setOverviewSelectInfo}\n          isFocusUpdate={isFocusUpdate}\n          visible={true}\n        />\n        <FocusPage\n          data={data}\n          setData={setData}\n          setIsFocusUpdate={setIsFocusUpdate}\n          setGeoLoading={setGeoLoading}\n          overviewSelectInfo={overviewSelectInfo}\n          visible={true}\n        />\n      </div>\n    </div>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport \"typeface-roboto\";\nimport \"./css/index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <CssBaseline />\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n//\n// const div = document.createElement(\"div\");\n// div.innerText(\"Hello\"); // slightly different with textContent\n// div.textContent(\"Hello\");\n// div.innerHTML(\"<strong>Hello</ strong>\");\n// div.remove();\n// div.getAttribute();\n// div.setAttribute();\n// div.removeAttribute();\n// div.classList.add();\n// div.classList.remove();\n// div.classList.toggle();\n// div.style;\n\n// document.body.append;\n// document.body.appendChild;\n// document.querySelector(\"body\");\n"],"sourceRoot":""}